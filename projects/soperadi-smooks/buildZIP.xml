<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="zipFiles" name="tSmooksInputComponent">
	<property name="project_dir" value="tSmooksInput"/>
	<property name="svn_repository" value="http://soperadi-smooks.googlecode.com/svn/trunk"/>
	<property name="component_dir" value="${project_dir}/component/tSmooksInput"/>
	<property name="jobs_dir" value="${project_dir}/job"/>
	<property name="lib_dir" value="${project_dir}/lib"/>
	<property name="res_dir" value="${project_dir}/resources"/>
	<path id="project.classpath">
		<pathelement location="./lib/svnjavahl.jar"/>
		<pathelement location="./lib/svnant.jar"/>
		<pathelement location="./lib/svnClientAdapter.jar"/>
	</path>
	<taskdef name="svn" classpathref="project.classpath" classname="org.tigris.subversion.svnant.SvnTask"/>
	<target name="init">
		<delete dir="${project_dir}"/>
		<delete file="${project_dir}.zip"/>
		<mkdir dir="${project_dir}"/>
	</target>
	<target name="zipFiles" depends="init">
		<svn javahl="false">
			<info target="${svn_repository}" propPrefix="Revision."/>
			<checkout url="${svn_repository}/components/tSmooksInput" destPath="${component_dir}"/>
			<checkout url="${svn_repository}/jobs/tmp/TALENDDEMOSJAVA" destPath="${jobs_dir}"/>
			<checkout url="${svn_repository}/projects/soperadi-smooks/lib" destPath="${lib_dir}"/>
			<checkout url="${svn_repository}/projects/soperadi-smooks/test/resources" destPath="${res_dir}"/>
		</svn>
		<move file="${component_dir}/readme.txt" tofile="${project_dir}/readme.txt"/>
		<replace file="${project_dir}/readme.txt" token="!MAX_REVISION!" value="${Revision.rev}"/>
		<zip destfile="${project_dir}.zip" basedir="${project_dir}"/>
		<delete dir="${project_dir}"/>
	</target>
</project>
